<!DOCTYPE html>
<html lang="sv" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Klasser</title>
    <th:insert th:replace="~{fragments :: metadata}"></th:insert>
    <script th:inline="javascript">
        /*<![CDATA[*/
        function confirmDelete(formId) {
            if (confirm("Vill du ta bort klassen?")) {
                document.getElementById(formId).submit();
            }
            return false;
        }
        /*]]>*/
    </script>
</head>
<body>
<div class="nav-box">
    <h1>Klasser</h1>
    <a th:href="@{/admin/track/new}">LÃ¤gg till ny klass</a> |
    <a th:href="@{/admin}">Tillbaka</a>
</div>

<!-- Include messages -->
<div th:insert="~{fragments :: messages(${errormsg}, ${confirmmsg})}"></div>

<div class="notepad">
    <ul class="list">
        <li th:each="track,iterStat : ${tracks}">
            <a th:href="@{/admin/track/{id}(id=${track.id})}"
               th:text="${track.name}">Klassnamn</a>

            <!-- Delete form -->
            <form th:id="'deleteForm-' + ${iterStat.index}"
                  th:action="@{/admin/track/{id}/delete(id=${track.id})}"
                  method="post" style="display:inline;">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <a href="#"
                   class="del"
                   th:onclick="'return confirmDelete(\'deleteForm-' + ${iterStat.index} + '\');'">
                    <img th:src="@{/css/delete.png}" alt="Radera"/>
                </a>
            </form>
        </li>
    </ul>
</div>
</body>
</html>
